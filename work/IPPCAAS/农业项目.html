<!DOCTYPE html>
<html lang="en">
    <!-- title -->


    

<!-- keywords -->



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="iTheds">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="iTheds">
    
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="">
    <meta name="description" content="农业项目基本需求问题3.	app需要提供哪些业务功能？App需要提供的业务功能主要包括六个大的方面： (1)	监测数据采集：通过手工录入、图片拍摄和自动获取等手段，以监测记录的形式对农作物病虫害监测数据进行采集；（P1）(2)	预警信息发布：通过app发布病虫害发生预警信息。（根据病虫害发生规律、监测数据分析结果和专业预判的过程不在app业务需求范围之内）；（P2）(3)	预警信息查看：通过订阅和">
<meta property="og:type" content="website">
<meta property="og:title" content="农业项目">
<meta property="og:url" content="http://itheds.github.io/work/IPPCAAS/%E5%86%9C%E4%B8%9A%E9%A1%B9%E7%9B%AE.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="农业项目基本需求问题3.	app需要提供哪些业务功能？App需要提供的业务功能主要包括六个大的方面： (1)	监测数据采集：通过手工录入、图片拍摄和自动获取等手段，以监测记录的形式对农作物病虫害监测数据进行采集；（P1）(2)	预警信息发布：通过app发布病虫害发生预警信息。（根据病虫害发生规律、监测数据分析结果和专业预判的过程不在app业务需求范围之内）；（P2）(3)	预警信息查看：通过订阅和">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-01-06T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-17T01:08:07.136Z">
<meta property="article:author" content="iTheds">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/favicon.ico">
    
    <title>农业项目 · iTheds&#39;s Studio</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link rel="preload" href="/css/style.css?v=20211217" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="/css/dark.css?v=20211217" as="style">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" href="/css/mobile.css?v=20211217" media="(max-width: 960px)">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js?v=20211217" as="script">
    <link rel="preload" href="/scripts/dark.js?v=20211217" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
<meta name="generator" content="Hexo 6.3.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
    
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        
            <div class="header-sidebar-menu">
        
            
                <div style="padding-left: 1px;">&#xe775;</div>
            
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href=/>iTheds's Studio.</a>
        </span>
    </div>
    <!-- toggle banner for post layout -->
    
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- back to top button -->
    <div class="footer-fixed-element">
        
            <div class="back-top back-top-hidden">
        
        
            <div>&#xe639;</div>
        
        </div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="







">
    
    <!-- 主页  -->
    
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
        </p>
        <!-- 文章页 meta -->
        
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <h1 id="农业项目"><a href="#农业项目" class="headerlink" title="农业项目"></a>农业项目</h1><h2 id="基本需求"><a href="#基本需求" class="headerlink" title="基本需求"></a>基本需求</h2><p>问题3.	app需要提供哪些业务功能？<br>App需要提供的业务功能主要包括六个大的方面：</p>
<p>(1)	监测数据采集：通过手工录入、图片拍摄和自动获取等手段，以监测记录的形式对农作物病虫害监测数据进行采集；（P1）<br>(2)	预警信息发布：通过app发布病虫害发生预警信息。（根据病虫害发生规律、监测数据分析结果和专业预判的过程不在app业务需求范围之内）；（P2）<br>(3)	预警信息查看：通过订阅和查询方式获取预警通知及预警详细信息；（P2）<br>(4)	病虫害智能识别：通过对病虫害为害部位拍照智能识别危害源，获取防治建议；（P3）<br>(5)	离线咨询：通过拍照和文字描述方式，发布病虫害咨询信息，并查看反馈咨询结果。（P2）<br>(6)	病虫害鉴定：基于图片和描述信息，鉴定病虫害种类，并给出防治建议；（P2）</p>
<p>(1)	监测人员；承担监测预警数据采集者、监测信息分析者和预警信息发布者角色职能。<br>(2)	领域专家；领域专家承担病虫害鉴定、给出防治建议的职责<br>(3)	种植从业者；种植从业者作为非专业监测数据发布者和服务功能获取者。从业者可以在获取病虫害识别、病虫害咨询服务的同时，提供监测信息。<br>(4)	管理员；拥有软件全部功能，监测数据的质量控制人员、系统业务数据管理者和维护者。</p>
<h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><p>作物6个.</p>
<h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><p>盐碱地重大病虫害监测预警数字化平台</p>
<p>wx1cb56e452c551838<br>5204f21f08aee043eca8bf91ccb6c52e</p>
<h2 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h2><p>前端 ui 设计。</p>
<h3 id="公共接口设计"><a href="#公共接口设计" class="headerlink" title="公共接口设计"></a>公共接口设计</h3><h3 id="数据模型设计"><a href="#数据模型设计" class="headerlink" title="数据模型设计"></a>数据模型设计</h3><h3 id="组件设计"><a href="#组件设计" class="headerlink" title="组件设计"></a>组件设计</h3><p>CropCollection<br>编写一个组件,作为作物采集:</p>
<ol>
<li>首先以选择的方式提供6个作物进行选择;</li>
<li>是否封垄;</li>
<li>平均株高;</li>
<li>拍照;默认显示一个照相机可以拍照,拍完的照片显示在后续.</li>
</ol>
<p>病虫采集 :PestDiseaseCollection</p>
<ol>
<li>可以选择病虫种类,最多分三级,试着给出些许示例,而且这个选择我希望是底部弹出一个级联式的选择方式,滚动选择;</li>
<li>危害程度,给出5种选择;</li>
<li>可以附带备注信息,一段输入框;</li>
<li>测报值(检测值&#x2F;100株),是一个数字进行输入;</li>
<li>拍照;默认显示一个照相机可以拍照,拍完的照片显示在后续.,而且每个照片还能选择是什么角度,共四种角度选择.</li>
<li>一个提交按钮和取消按钮,分别对应着界面跳转;</li>
</ol>
<h3 id="页面设计"><a href="#页面设计" class="headerlink" title="页面设计"></a>页面设计</h3><p>基于 vue3 的 uni app开发.</p>
<h4 id="注册邀请"><a href="#注册邀请" class="headerlink" title="注册邀请"></a>注册邀请</h4><h4 id="日志界面"><a href="#日志界面" class="headerlink" title="日志界面"></a>日志界面</h4><p>基于vue3的 uni app ，设计一个日志界面，</p>
<ol>
<li>一个用户发起一次日志，该用户为发起者：</li>
<li>发起者选择一个采样方法，五点取样法、等距抽样法、点抽样法，其能确定有几个采样点，假设为 n 个，那么就会有 n 个采集任务；</li>
<li>下面显示一个列表，表示目前已经有多少个完成的采集任务，初始的时候应该没有完成的采集任务；</li>
<li>发起者，这个界面有一个按钮&lt;二维码&gt;，点击可以显示一个二维码；其他用户能够通过扫描二维码进入日志界面，加入该界面的为工作者；</li>
<li>发起者的日志界面还有一个按钮&lt;采集&gt;，点击采集，可以跳转到采集界面；采集界面采集的信息将传回到日志界面；</li>
<li>工作者的日志界面也有一个按钮&lt;采集&gt;，点击采集，可以跳转到采集界面；采集界面采集的信息将传回到日志界面；</li>
<li>发起者和工作者的界面能够同步；</li>
<li>日志界面根据角色的不同进行渲染，其仅有一个按钮&lt;二维码&gt;有差别；</li>
</ol>
<h4 id="采集"><a href="#采集" class="headerlink" title="采集"></a>采集</h4><p>设计一个采集界面,CollectionInterface,将 PestDiseaseCollection 和 CropCollection 联合起来:</p>
<ol>
<li>首先是 PestDiseaseCollection , 采集界面只针对单一的一个作物进行采集;</li>
<li>然后是一行,病虫记录,其能够进行添加,每次添加,都显示 PestDiseaseCollection ,我希望显示的 PestDiseaseCollection 时,其他采集界面是灰度透明的;添加完成后显示在下面的一个list中,表示一条病虫记录.</li>
<li>这个采集界面可以有两个按钮,提交和取消;</li>
</ol>
<h4 id="预警发布"><a href="#预警发布" class="headerlink" title="预警发布"></a>预警发布</h4><p>设计一个预警发布界面，</p>
<ol>
<li>可以选择爆发地区,采用 uni 的地区选择;</li>
<li>可以选择虫害种类;</li>
<li>可以选择时间;</li>
<li>可以选择等级,共5个等级;</li>
<li>可以添加措施,输入框;</li>
<li>可以选择依据.其有一个添加按钮,点击添加后弹出一个组件,组件中有个表格,可以勾选多个表格行,然后点击确定后回到这个预警发布界面;然后依据下面会显示勾选的表格行.</li>
<li>其有一个提交按钮和取消按钮.</li>
</ol>
<h4 id="预警订阅"><a href="#预警订阅" class="headerlink" title="预警订阅"></a>预警订阅</h4><h4 id="病虫害识别"><a href="#病虫害识别" class="headerlink" title="病虫害识别"></a>病虫害识别</h4><h4 id="病虫害鉴定"><a href="#病虫害鉴定" class="headerlink" title="病虫害鉴定"></a>病虫害鉴定</h4><h2 id="技术调研"><a href="#技术调研" class="headerlink" title="技术调研"></a>技术调研</h2><p>nodejs 自不必说。</p>
<h3 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h3><p>Vue.js（读音 &#x2F;vjuː&#x2F;, 类似于 view） 是一套构建用户界面的渐进式框架。</p>
<p>Vue 只关注视图层， 采用自底向上增量开发的设计。</p>
<p>Vue 的目标是通过尽可能简单的 API 实现响应的数据绑定和组合的视图组件。</p>
<h3 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h3><p>uni-app 是一个使用 Vue.js 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web（响应式）、以及各种小程序（微信&#x2F;支付宝&#x2F;百度&#x2F;头条&#x2F;飞书&#x2F;QQ&#x2F;快手&#x2F;钉钉&#x2F;淘宝）、快应用等多个平台。</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>vue<br>nodejs<br>electron<br>uni-app<br>openles 地图 - 阿里地图服务器<br>rem</p>
<h1 id="开发日志"><a href="#开发日志" class="headerlink" title="开发日志"></a>开发日志</h1><p>[2025.1.10]</p>
<p>  531  gradle dependencies<br>  532  .&#x2F;gradlew clean build<br>  534  &#x2F;gradlew cleanBuildCache<br>  536  .&#x2F;gradlew cleanBuildCache<br>  537  .&#x2F;gradlew clean build<br>  538  BUILD FAILED in 2s<br>  539  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  540  .&#x2F;gradlew :biz:dependencies –configuration compileClasspath<br>  541  .&#x2F;gradlew clean build<br>  542  find . -name gt-shapefile<br>  543  .&#x2F;gradlew clean build<br>  545  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  546  .&#x2F;gradlew clean build<br>  547  .&#x2F;gradlew –info clean build<br>  548  .&#x2F;gradlew –info build<br>  549  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  550  .&#x2F;gradlew –info clean build<br>  551  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  552  .&#x2F;gradlew –info clean build<br>  553  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  556  .&#x2F;gradlew clean build<br>  558  rm -rf .gradle build<br>  559  .&#x2F;gradlew clean build<br>  560  .&#x2F;gradlew dependencies –configuration compileClasspath<br>  561  history</p>
<p>无语了，搭建了三天这个破后端，解决了版本问题，一大堆依赖问题，结果还是有一个 jai_core 没有找到，公共库的 maven 上已经没有这个文件了。<br>要是真的不考虑成本，直接新建一个项目来做这件事，进行先序调研。</p>
<p>mvn install:install-file -Dfile&#x3D;&#x2F;home&#x2F;ithedslonnie&#x2F;Projects&#x2F;ClientSide&#x2F;sts-master&#x2F;biz&#x2F;geotools-20.2&#x2F;jai_core-1.1.3.jar <br>    -DgroupId&#x3D;javax.media -DartifactId&#x3D;jai_core -Dversion&#x3D;1.1.3 <br>    -Dpackaging&#x3D;jar</p>
<p>[1.14]<br>有点模糊不清，需求文档到底要不要写？这既不是一个任务，也没有明显的界限。</p>
<p>但是我知道，如果我再去搭建那个后端，估计会浪费不少时间。</p>
<p>把所有的 biz 中的依赖给删除，完全用本地 geotools 文件夹下的内容，就成功了？<br>其实没有，是通过 idea 配置环境都没有配对。</p>
<p>[1.14]<br>先看看前端的内容， vue 的。</p>
<ol>
<li>前端框架：Vue.js</li>
<li>模块化构建工具：Webpack 或 Vite</li>
<li>包管理工具：npm 或 yarn</li>
<li>静态资源管理</li>
<li>路由：Vue Router</li>
<li>状态管理（可能）：Vuex 或 Pinia</li>
</ol>
<p>这个项目暂时还是先用 vue + electron 实现。</p>
<p>先粗略看一遍教程，再抽离出 api 。</p>
<p>没有办法阅览。</p>
<p>[1.17]<br>技术栈，采用 ant design + react native，<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6968495702183772190">Electron + React + Ant Design</a></p>
<p>确定了采用 React Native + Ant Design Mobile。</p>
<pre><code>1015  cd IPP-CAASApp/webclient/
1028  rm -rf webclient/
1029  sudo npx react-native init webclient
1030  cd webclient/
1032  npm install antd-mobile
1033  npm install react-native-vector-icons @react-navigation/native react-navigation-stack
1034  npm install @react-navigation/native
1035  npm install react-native-screens react-native-safe-area-context
1036  npm install @react-navigation/stack
1037  npm install react-native-gesture-handler react-native-reanimated
1038  npx react-native run-android
</code></pre>
<p>uni-app ， vue2</p>
<pre><code>1076  npm install -g @vue/cli
1077  sudo npm install -g @vue/cli
1078  vue create -p dcloudio/uni-preset-vue uniclient
1079  cd uniclient
1080  ls
1081  npm run dev:h5
</code></pre>
<p>uni-app ， vue3</p>
<pre><code>1087  vue create uni3client
1088  ls
1089  cd uni3client/
1097  npm run server
</code></pre>
<p>[1.21]<br>年轻人，不要急躁，要谦虚。不要觉得什么都没有意义，做好一件事就有意义。</p>
<table>
<thead>
<tr>
<th>中文</th>
<th>英文</th>
</tr>
</thead>
<tbody><tr>
<td>注册</td>
<td>Registration</td>
</tr>
<tr>
<td>采集</td>
<td>Collection</td>
</tr>
<tr>
<td>预警订阅</td>
<td>Warning subscription</td>
</tr>
<tr>
<td>预警发布</td>
<td>Warning release</td>
</tr>
<tr>
<td>病虫害识别</td>
<td>Pest and disease identification</td>
</tr>
<tr>
<td>病虫害鉴定</td>
<td>Pest and disease identification</td>
</tr>
</tbody></table>
<p>FunctionInterface<br>CollectionInterface</p>
<table>
<thead>
<tr>
<th>中文</th>
<th>英文</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>监测人员</td>
<td>Monitoring Personnel</td>
<td></td>
</tr>
<tr>
<td>领域专家</td>
<td>Domain Expert</td>
<td></td>
</tr>
<tr>
<td>种植从业者</td>
<td>Planting Practitioner</td>
<td></td>
</tr>
<tr>
<td>管理员</td>
<td>Administrator</td>
<td></td>
</tr>
</tbody></table>
<p>[2.10]<br>picker 一直无法使用，警告：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Vue warn]: Failed to resolve component: picker</span><br><span class="line">If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement. </span><br><span class="line">  at &lt;WarningPublish onVnodeUnmounted=fn&lt;onVnodeUnmounted&gt; ref=Ref&lt; undefined &gt; &gt; </span><br><span class="line">  at &lt;RouterView&gt; </span><br><span class="line">  at &lt;App&gt;</span><br></pre></td></tr></table></figure>

<p>后来一回想，先查一下 picker 是不属于 vue 的原生组件的，其是 uniapp 的原生组件。<br>然后创建项目的命令使用的是 <code>vue create uni3client</code> , 也和 uniapp 没有太大关系.<br>所以该问题是,我创建的项目并非是 uniapp 项目,其只是依赖上使用了 uniapp <code>&quot;@dcloudio/uni-ui&quot;: &quot;^1.5.7&quot;</code>,<br>使用命令构建基于 vue3 的 uniapp :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx degit dcloudio/uni-preset-vue<span class="comment">#vite my-vue3-project</span></span><br></pre></td></tr></table></figure>

<p>[2.11]<br>全线技术更改，从 vue3 项目移植到 基于 vue3 的 uni-app 项目。</p>
<p>想要整个好看的导航。导航能够固定就可以了。<br>或者整个好看的表单。</p>
<p>[2.12]<br>目前病虫记录的添加应该显示在添加病虫记录的下方，显示一个东西，有很多条，每一条都可以点开的那种。</p>
<p>[2.13]<br>通过 vi-bind 进行数据绑定 props 传递到子组件，子组件通过<code>emit(&#39;addRecord&#39;, record);</code>将数据传递给父组件，触发其事件 addRecord 。 </p>
<p>[2.14]<br>确定 API。</p>
<p>[2.19]<br>下一步做什么？<br>是否可以开始前后端进行对接？</p>
<p>下一步就是先进行初步的数据构建，和数据的对接。最好是后端的数据拿过来直接用。</p>
<p>再考虑说下一步的优化工作。</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>LocalStorage</th>
<th>SessionStorage</th>
<th>Cookies</th>
<th>IndexedDB</th>
<th>Extension Storage</th>
</tr>
</thead>
<tbody><tr>
<td><strong>存储容量</strong></td>
<td>~5MB</td>
<td>~5MB</td>
<td>~4KB per cookie</td>
<td>几 GB</td>
<td>通常几 MB 至 几 GB</td>
</tr>
<tr>
<td><strong>生命周期</strong></td>
<td>永久存储，直到删除</td>
<td>会话结束时删除</td>
<td>可设置过期时间，默认会话级</td>
<td>永久存储，直到删除</td>
<td>永久存储，直到扩展禁用</td>
</tr>
<tr>
<td><strong>访问范围</strong></td>
<td>同源策略，跨标签有效</td>
<td>同源策略，仅在当前会话中有效</td>
<td>跨标签有效（每次 HTTP 请求都带）</td>
<td>同源策略，跨页面有效</td>
<td>扩展内部访问</td>
</tr>
<tr>
<td><strong>浏览器支持</strong></td>
<td>所有现代浏览器</td>
<td>所有现代浏览器</td>
<td>所有现代浏览器</td>
<td>所有现代浏览器</td>
<td>扩展 API 支持浏览器扩展</td>
</tr>
<tr>
<td><strong>用途</strong></td>
<td>长期存储非敏感数据</td>
<td>会话存储数据</td>
<td>用户身份、会话管理、跟踪</td>
<td>大规模数据存储、离线存储</td>
<td>存储与扩展相关的配置和数据</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>存储数据</th>
<th>预期大小</th>
<th>持久化需求</th>
<th>存储位置</th>
</tr>
</thead>
<tbody><tr>
<td>用户信息</td>
<td>小（几 KB 至几 MB）</td>
<td>高，长期保存</td>
<td><code>localStorage</code>、<code>SharedPreferences</code>、<code>NSUserDefaults</code></td>
</tr>
<tr>
<td>身份验证</td>
<td>小（几 KB）</td>
<td>高，直到用户注销或过期</td>
<td><code>Cookies</code>、<code>localStorage</code>、<code>SharedPreferences</code>、<code>NSUserDefaults</code></td>
</tr>
<tr>
<td>字典数据</td>
<td>中（几十 KB 至几 MB）</td>
<td>中，可能需要较长时间保存</td>
<td><code>localStorage</code>、<code>IndexedDB</code>、<code>文件系统</code>、<code>SQLite</code></td>
</tr>
</tbody></table>
<p>[2.24]<br>信息体系的建设。</p>
<p>最主要的一个是全局的用户信息，另一个是日志信息，还有字典数据。<br>其中，日志信息是要经常更新，是短期的。</p>
<p>[2.27]<br>ui 真难做。</p>
<p>数据模型替换，需要考虑的是：</p>
<ol>
<li>替换字典；</li>
<li>日志的存储和同步；</li>
</ol>
<p>PlotMethod<br>PlotNum</p>
<p>[3.3]<br>至少是要达到，第一个，今天上午能够进行：</p>
<ol>
<li>创建日志；</li>
<li>提交日志；</li>
<li>根据 key 同步日志；</li>
</ol>
<p>了解到界面的需求理解有错，应该是日志界面就已经定好了要存放什么作物。<br>流程：</p>
<ol>
<li>创建初始日志，确定主要时间及 baseInfo， 确定区域数量；<ol>
<li><input checked="" disabled="" type="checkbox"> 基本完成，但是还缺少对数目的限制，这块和数据管理有关，前端似乎对数据管理的功能和方式有所欠缺，但是后续肯定得管理起来；</li>
</ol>
</li>
<li>添加区域，以当前目的为区域；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成；</li>
</ol>
</li>
<li>通过区域，添加病虫害信息；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成，并且支持三种形式；</li>
</ol>
</li>
</ol>
<p>数据传递方法。<br>显示组件，隐式组件(需要 selected )，页面跳转。</p>
<p>下午的时候达到：</p>
<ol>
<li>添加拍照下矿栏目</li>
</ol>
<p>然后再考虑是手机的情况：</p>
<ol>
<li>能够在手机上运行；</li>
<li>在电脑端发起日志，手机端能够同步；</li>
</ol>
<p>[3.4]<br>重新梳理一下时间和逻辑，明天要看，基本上是不可能了。<br>将之前说的页面已经修改的差不多了，但是还有许多瑕疵需要优化，先处理后端交互逻辑：</p>
<ol>
<li>创建日志；</li>
<li>提交日志；</li>
<li>根据 key 同步日志；</li>
</ol>
<p>[3.6]<br>现在问题是如何提交，什么时候提交比较合理。<br>既然创建区域可以取消，那么提交自然也是在&lt;提交&gt;按钮处提交，<br>之后即时提交应该在修改界面中使用。</p>
<p>大部分 ok ， 接下来就是修改植物病虫害及天敌的采集界面。</p>
<p>[3.7]<br>今日先把 app 放在 android 上运行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1147  vim 51-android.rules</span><br><span class="line">1148  <span class="built_in">ls</span></span><br><span class="line">1149  sudo vim 51-android.rules</span><br><span class="line">1150  sudo <span class="built_in">chmod</span> a+rx /etc/udev/rules.d/51-android.rules</span><br><span class="line">1151  adb devices</span><br><span class="line">1152  sudo service udev restart</span><br><span class="line">1153  adb kill-server</span><br><span class="line">1154  adb start-server</span><br><span class="line">1155  adb devices</span><br><span class="line">1156  su root</span><br><span class="line">1157  sudo systemctl restart systemd-udevd.service</span><br><span class="line">1158  adb devices</span><br><span class="line">1159  adb kill-server</span><br><span class="line">1160  adb start-server</span><br><span class="line">1163  adb devices</span><br><span class="line">1164  <span class="built_in">ls</span></span><br><span class="line">1165  sudo udevadm control --reload-rules</span><br><span class="line">1166  sudo udevadm trigger</span><br><span class="line">1167  sudo dnf list | grep android</span><br><span class="line">1168  sudo adb kill-server</span><br><span class="line">1169  sudo adb start-server</span><br><span class="line">1170  adb kill-server</span><br><span class="line">1171  adb start-server</span><br><span class="line">1172  adb devices -l</span><br><span class="line">1173  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<p>允许 USB 调试”的提示<br>如果出现提示，点击”允许”<br>可以勾选”一律允许使用这台计算机进行调试”</p>
<p>[3.10]<br>今日目标：</p>
<ol>
<li>测试基本的功能在手机上的实现；</li>
<li>进行插入，还是与后端交互的问题；</li>
<li>确定本机存储的数据库；</li>
</ol>
<p>原来 js 也有深拷贝之说。<br>看来有许多变量要改成深拷贝了。</p>
<p>病虫害记录指的是，病害、虫害、天敌这三种记录。</p>
<p>基本的数据模型要进行对接。</p>
<p>数据集有前端和后端之分，要采用两个不同的标志符号区别开来。<br>前端的数据集应该具备自动构建页面的功能。</p>
<p>前端数据是和界面强关联的，通过前端数据构建成后端数据的请求，后端数据的回复信息，如何复写到前端数据？</p>
<p>[3.12]<br>界面渲染的 RecordListSection ， 其渲染的时候和传出的值根本就不属于同个级别。<br>理想情况是传递一个界面过来，然后确定渲染值，然后再确定以动作为目标的内容，根据动作目标内容，来确定子组件方法对外的传递值。</p>
<p>如果真的要做这种自动生成界面的组件，那么要考虑的东西还是挺多的，还需要考虑布局的问题、动作的问题等。<br>目前可能没有办法完全涵盖，因为还要设计各类方法来生成和书写。<br>所以直接抽象成面向接口的方式，后期通过接口来控制其渲染规则。</p>
<p>我期望的是，前端数据代表的是存储结构，页面配置是加上其中文描述。</p>
<p>元数据应该是根据方法来获取的。<br>后续，不需要再前端的 vue 中出现对通信方法的引用。<br>但是，对 request 的引用是直接到业务层，如果只是依靠数据的概念，那么就需要在数据层次约定业务逻辑。</p>
<p>要不要使用异步的方法，对于前端数据的获取，其本质是通过通信方法来获取的。<br>一般的，异步 + 响应式， 才具有一定意义；但是即使非响应式，用异步是否也会提升效率。</p>
<p>种类是一个级联式的 picker ，如果不存储其 key[] 形式，那么就无法保存和显示。<br>按理来说，这应该属于页面配置数据，前端数据只需要存储 key[] 即可， 然后生成后端交互数据的时候需要查询元数据。</p>
<p>初步整理完成。虽然没有完全达到我想要的效果。<br>接下来就是把元数据对接上，然后把插入整理完成。<br>还有 20 分钟，把日志都插入完成。</p>
<p>[3.14]<br>接下来就是全套应用元数据。<br>争取月底就能用。</p>
<p>前端数据到页面配置数据，还是有一定的距离。<br>因为比如 picker , 其还需要存储级联式数据。暂时方法,选择式的数据都要一个 key. – 已经完美解决， 通过确定级联式格式，并且在前端数据中添加部分页面配置信息的描述。构建新的组件 UsePicker。</p>
<p>[3.17]<br>接下来就是对接元数据用 api。</p>
<p>后端数据的请求，应该建立映射关系：<br>url 请求格式，发送的数据内容， 接收的数据格式 – 不需要描述目的， 应该面向的是数据，因为目的是和业务绑定的。</p>
<p>写一个函数，通过 key 和 request ， 就能够获取到后端返回的数据。</p>
<p>[3.18]<br>后端数据模型，分为：<br>虫类、植物<br>病害、虫类、天敌。</p>
<p>curl -H “X-QW-Api-Key: 96f4b29772264c07afa343524aa28ae2” –compressed <br>‘<a target="_blank" rel="noopener" href="https://devapi.qweather.com/v7/weather/now?location=114,22">https://devapi.qweather.com/v7/weather/now?location=114,22</a>‘</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;200&quot;</span><span class="punctuation">,</span><span class="attr">&quot;updateTime&quot;</span><span class="punctuation">:</span><span class="string">&quot;2025-03-19T09:34+08:00&quot;</span><span class="punctuation">,</span><span class="attr">&quot;fxLink&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://www.qweather.com/en/weather/xiangzhou-101280704.html&quot;</span><span class="punctuation">,</span><span class="attr">&quot;now&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;obsTime&quot;</span><span class="punctuation">:</span><span class="string">&quot;2025-03-19T09:34+08:00&quot;</span><span class="punctuation">,</span><span class="attr">&quot;temp&quot;</span><span class="punctuation">:</span><span class="string">&quot;18&quot;</span><span class="punctuation">,</span><span class="attr">&quot;feelsLike&quot;</span><span class="punctuation">:</span><span class="string">&quot;15&quot;</span><span class="punctuation">,</span><span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span><span class="string">&quot;100&quot;</span><span class="punctuation">,</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span><span class="string">&quot;晴&quot;</span><span class="punctuation">,</span><span class="attr">&quot;wind360&quot;</span><span class="punctuation">:</span><span class="string">&quot;45&quot;</span><span class="punctuation">,</span><span class="attr">&quot;windDir&quot;</span><span class="punctuation">:</span><span class="string">&quot;东北风&quot;</span><span class="punctuation">,</span><span class="attr">&quot;windScale&quot;</span><span class="punctuation">:</span><span class="string">&quot;3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;windSpeed&quot;</span><span class="punctuation">:</span><span class="string">&quot;18&quot;</span><span class="punctuation">,</span><span class="attr">&quot;humidity&quot;</span><span class="punctuation">:</span><span class="string">&quot;52&quot;</span><span class="punctuation">,</span><span class="attr">&quot;precip&quot;</span><span class="punctuation">:</span><span class="string">&quot;0.0&quot;</span><span class="punctuation">,</span><span class="attr">&quot;pressure&quot;</span><span class="punctuation">:</span><span class="string">&quot;1021&quot;</span><span class="punctuation">,</span><span class="attr">&quot;vis&quot;</span><span class="punctuation">:</span><span class="string">&quot;17&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cloud&quot;</span><span class="punctuation">:</span><span class="string">&quot;0&quot;</span><span class="punctuation">,</span><span class="attr">&quot;dew&quot;</span><span class="punctuation">:</span><span class="string">&quot;10&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;refer&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;sources&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;QWeather&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;license&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;CC BY-SA 4.0&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>curl -X GET –compressed <br>-H “X-QW-Api-Key: 96f4b29772264c07afa343524aa28ae2” <br>‘<a target="_blank" rel="noopener" href="https://devapi.qweather.com/v7/solar-radiation/24h?location=116.41,39.92">https://devapi.qweather.com/v7/solar-radiation/24h?location=116.41,39.92</a>‘</p>
<p>[3.19]<br>数据建模也不完善，无 key 导致很多内容很畸形。&#x2F;&#x2F; TODO</p>
<p>[3.20]<br>三个病害的内容需要整理。</p>
<p>UsePicker 中单序列的内容也应该和多序列的一致。</p>
<p>不受上级样式影响。</p>
<p>后续的优化内容：</p>
<ol>
<li>采集区域采用更加可复用的组件 RecordList；<ol>
<li><input disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>手机的拍照测试；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>手机的存储测试；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>页面的自动生成，主要体现在 PestDiseaseCollection.vue;<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
</ol>
<p>怎么布置到云端呢，这也是一个问题。</p>
<p>[3.21]<br>开始手机端调试。<br>但是仍然有一些功能没有开发完成，下午开发。</p>
<p>手机端有些问题：</p>
<ol>
<li>报错不明显；</li>
<li>离线模式有问题；<ol>
<li><input checked="" disabled="" type="checkbox"> 解决</li>
</ol>
</li>
<li>拍照有问题；<ol>
<li><input checked="" disabled="" type="checkbox"> 解决</li>
</ol>
</li>
</ol>
<p>{<br>    “data”: {…<br>    },<br>    “statusCode”: 200,<br>    “header”: {<br>        “content-length”: “314”,<br>        “content-type”: “application&#x2F;json;charset&#x3D;UTF-8”<br>    },<br>    “cookies”: [],<br>    “errMsg”: “request:ok”<br>}</p>
<p>{<br>    “errMsg”: “request:fail timeout”<br>}</p>
<p>错误内容，其处理的结果。</p>
<p>网络的错误处理应该和内部的错误处理分开？</p>
<p>[3.24]<br>上周有些遗留问题，其 request 的返回值没有完全解决。</p>
<p>返回一个 success, 未免有些畸形。<br>目前可以接受的就三个状态， 执行成功、网络失败、内部错误。</p>
<p>每一层都有不一样的结构：</p>
<p>backEndRequest: 泛用内容， 封装的 url 请求接口，返回 url 请求结果；<br>makeRequestWithErrorHandling: 使用 url_request_map 作为参数的结构，返回的是 response 的 data；<br>getWeather: 每个请求的结构， 通过此来返回特定的结构内容，为最直接的前端业务对接，返回的是自定的结构体。</p>
<p>ok 解决。</p>
<p>那么还有什么可以开发的？</p>
<ol>
<li>我的界面开发；<ol>
<li><input disabled="" type="checkbox"> 大体框架</li>
</ol>
</li>
<li>虫害采集统计功能；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>采集区域的显示组件开发；<ol>
<li><input disabled="" type="checkbox"> </li>
</ol>
</li>
<li>身份的应用；<ol>
<li><input disabled="" type="checkbox"> </li>
</ol>
</li>
<li>验证码的嵌入；<ol>
<li><input disabled="" type="checkbox"> 等待完善</li>
</ol>
</li>
<li>ui 美化。</li>
</ol>
<p>完善该界面，添加验证码功能，并且害应该添加额外的三个字段{“email”: “电子邮箱”, “password”: “密码”, “phone”: “电话号码”, “real_name”: “昵称”, “username”: “用户名” }，验证码通过frontendData.js文件中的的getCaptcha获取。自动填充按钮将生成一个测试用户并且登入。说中文，基于vue3的uniapp项目。</p>
<p>值 + 单位， 进行计算。</p>
<p>[3.25]<br>是否格式可以通过父级进行传递。</p>
<p>[3.27]<br>定义的组件是否只能够传递单一的值？这涉及到<code>v-model:value=&quot;dp_log[&#39;value&#39;]&quot;</code>和<code>v-model=&quot;dp_log[&#39;value&#39;]&quot;</code>的区别。<br>还是决定采用<code>v-model=&quot;dp_log[&#39;value&#39;]&quot;</code>的形式。<br>之后开发的组件，会有一个对应的传入格式。</p>
<p>优化该组件，</p>
<ol>
<li>累计值和单位类型的选择在同一行，布局参考@use ‘@&#x2F;assets&#x2F;styles&#x2F;styles.scss’;中的horizontal_layout；</li>
<li>‘值’和单位值应该在同一行;</li>
<li>添加按钮编成一个小的 icon ，与’值’和单位值在同一行；</li>
<li>输入历史也编成一个小的 icon ,与 累计值和单位类型在同一行；</li>
</ol>
<p>很好，样式我已经确定了，你可以看看这个文件，基于此。在这个组件中还有一些业务计算上的问题，那就是计算方法中unitCalculators只支持两个值，默认来一个新的&lt;值，单位值&gt;就进行累加操作，其实有时候并不是累加操作，所以，将计算改成支持三个值&lt;累计值，值，单位值&gt;，阅读import * as unitsPlant from ‘@&#x2F;utils&#x2F;unitsPlant’; 文件，里面有所有的单位和计算方法，对该文件以及unitsPlant.js文件进行优化；</p>
<p>我修改了这两个文件，重新阅读。并且改进：</p>
<ol>
<li>统计值应该支持null或者nan或者其他非法，来表示没有旧的统计值，注意，不要用0来当成这个特殊的非法值，因为有时候会输入0；</li>
<li>DynamicCalculator 也应该有一个功能，父组件传递的’累计值?’为null或者nan的时候，表示其没有统计值。但累计值处显示为 0。<br>如果默认初始值为 0 ， 那么这个值很可能会影响到后面的值时什么。</li>
</ol>
<p>比如对于单位 头&#x2F;百枝， 初始值 statistics &#x3D; 100 ， 100肯定是这个单位的目前状态，也就是 100 头&#x2F;百枝, 那么新来一个&lt;值 ， 单位值&gt;&#x3D;&lt;1， 1&gt;， 那么计算方式就是&lt;old_statistics&#x3D; 100, 值 &#x3D; 1 ， 单位值 &#x3D; 1&gt;, 那么就可以得出一个新的值 statistics &#x3D; ?<br>统计学。</p>
<p>你提出了一个很好的观点，将 statistics 还保存了 totalPests、totalPests、value 这三个值，比较符合统计学的内容，那么我在父组件传递的时候将不在只是单纯传递一个 value， 进行交互的时候将传递 statistics 结构。试着修改 DynamicCalculator</p>
<p>头&#x2F;百枝<br>头&#x2F;百复<br>病叶&#x2F;百枝<br>头&#x2F;百株<br>蛀荚&#x2F;百株<br>卷叶&#x2F;百株<br>蛀叶&#x2F;百株<br>头&#x2F;平米<br>死株&#x2F;百株<br>头&#x2F;百叶<br>头&#x2F;百朵花<br>枯心苗&#x2F;百株<br>病叶&#x2F;百株<br>病株&#x2F;百株<br>头&#x2F;桶天<br>头&#x2F;板天</p>
<p>有虫株率<br>病株率<br>受害株率</p>
<p>[3.28]<br>今天对接好所有的 api 。</p>
<p>[4.1]<br>上传文件 api 完成。</p>
<ol>
<li>活跃 p_logs；</li>
<li>dp_log 多个新建；</li>
</ol>
<p>[4.7]<br>二维码呢？真搞笑。</p>
<p>设计一个值，进行锁定，表示该组件是否可编辑，如果不可编辑，那么就锁定所有内容，并且一并修改PhotoShow组件，使得其也支持该功能。如果锁定了不可编辑，那么PhotoShow应当不显示拍照按钮。</p>
<p>业务关联太弱。</p>
<p>[4.10]<br>在import * as frontendData from ‘@&#x2F;utils&#x2F;frontendData’;文件中查看dp_log的格式，其为dp_log_demo，distribution本身已经是这种结构。然后你应该还需要知道，distribution的计算是通过density的计算而来的，在updateDistributionRate函数中，每次对density添加一次记录就会触发该函数，可以通过density本次对于上次的增量来判断其本次的提交是什么，如果 本次提交的值value是0, 那么说明本次提交的所有单位数都是干净的，在distribution中记录，其总的单位数，distribution的值记录干净的单位数，这样就可以得出distribution的value，其为一个百分数，表示不干净的数目占比。当然如果density提交了一个形如&lt;值2, 12单位数&gt;的记录，那么说明有10个单位数是干净的。</p>
<p>似乎没有完全理解这两个值的关系。density值，其只是作为采集使用，其每次采集都会为density的两个值totalValue和totalCount增加数据。通过保存一开始的值，我们可以得出每次的&lt;value, count&gt;的值，这表示的是对于单位数内有多少的value，当然value为0,就表示这些单位数是没有value的，或者说value的数目少于count的数目，那么就表示这次，至少有count-value的单位数是没有value的。而distribution表示的是，对于总的单位数，有多少单位数是没有value的的。</p>
<p>下一步干什么，主要是业务关联比较弱的情况。</p>
<p>说中文。这个组件用于进行单位的选择，并且进行采集，计算出一个statistics_demo的value来作为数据的特定统计方式，但是其没有实现一个功能，那就是显示该统计值的分布率，其解释为每次采集&lt;值，单位数&gt;，就表明单位数有值，但是如果值为0, 就表明单位数是无值的，而单位数其是否有值，也应该作为一个参数，其表示的就是分布率，即有多少值是无的，表示一个百分比。比如， &lt;1, 3&gt;， 只要值是非 0 ， 就表示单位数是有值的，此时为 100, 如果再键入一个&lt;0, 3&gt;， 这 3 个就是无值的， 此时为 50 。<br>重新构建这个 export const statistics_demo &#x3D; {<br>    distribution: null,<br>    density: null,<br>    totalValue: null,  &#x2F;&#x2F; 累计值<br>    totalCount: null,  &#x2F;&#x2F; 计数值<br>    unit: null,        &#x2F;&#x2F; 单位信息,其为 unitOptions 数组中的选定内容<br>    display() {<br>        console.log(‘display’, this);<br>        return this.value ? this.value : 0 + this.unit ? this.unit.label : 0;<br>    }<br>};<br>density 替代原来的 value;distribution 作为新加的值,单位是 %。</p>
<p>我修改了部分内容，基于目前的文件状态进行修改。历史按钮应该放在虫数和株数的那一行，并且历史记录在该行之下。<br>uni-badge 代替角标。然后历史记录用uni-collapse。</p>
<p>允许你查阅更多需要的文件。我希望你想修改该文件：</p>
<ol>
<li>点击创建日志的时候，自动创建采样区域个数的 p_logs, 并且为每个 p_log 的命名进行设定(p_log.name)，设定为 m_log.name + ‘-‘ + 自增编号。p_log 和 m_log 的格式参见 ‘@&#x2F;utils&#x2F;frontendData’ 。 关于如何创建 p_log ， 参见 CreateLocationInterface.vue 中的内容。其有示例。</li>
</ol>
<p>根据该组件， DynamicCalculator ， 开发一个新的组件， 其传入传出的格式为 export const statistics_demo &#x3D; {<br>    density: null,<br>    distribution: null,<br>    totalValue: null,  &#x2F;&#x2F; 累计值<br>    totalCount: null,  &#x2F;&#x2F; 计数值<br>    unit: null,        &#x2F;&#x2F; 密度单位信息,其为 unitOptions 数组中的选定内<br>    display() {<br>        console.log(‘display’, this);<br>        return this.value ? this.value : 0 + this.unit ? this.unit.label : 0;<br>    }<br>};在此基础上加上一个history在statistics_demo结构中。<br>去除     density: null,distribution: null,这两个值。命名为 StatisticsCalculator。 只进行采集，不计算 density 和 distribution。传入的值 unitOptions、:unitCalculators、:unitDescriptions、:unitInputLabels、:unitDisplayUnits 不再是选择的集合而是确定的值。</p>
<p>如你所见。在该组件(PestDiseaseCollection)中， 我其实就是调用了 DynamicCalculator(其在动态生成组件DynamicFormField中)，那么数据之间的关联就改变了由原来的export const dp_log_demo &#x3D; {<br>    &#x2F;&#x2F; 包括密度和分布<br>    statisticsData: useClone().deepClone(unitsPlant.statistics_demo),&#x2F;&#x2F;旧的statistics_demo结构<br>};<br>变成了<br>export const dp_log_demo &#x3D; {<br>   density: null,<br>   distribution: null,<br>   unit: null,<br>   &#x2F;&#x2F; 包括密度和分布<br>   statisticsData: useClone().deepClone(unitsPlant.statistics_demo),&#x2F;&#x2F;新的statistics_demo结构<br>};<br>所以你需要在该组件的 handleFieldUpdate 中将这些数据进行关联，或者你是否有更好的方式来对这些数据进行关联？。将 dp_log_demo 变成响应式的？ 该结构 dp_log_demo 在 ‘@&#x2F;utils&#x2F;frontendData’;中。</p>
<p>density 和 distribution ， 和unit 和 statisticsData之间的关系应该有更具体的说法。 StatisticsCalculator 其需要一个单位数据 unitOptions ，根据该单位数据进行确定 :unitCalculators、:unitDescriptions、:unitInputLabels、:unitDisplayUnits， 而这个 unitOptions 由 unit 进行确定， 是否可以进行监听其改变？ 来确定 StatisticsCalculator 组件的各项传入的参数？然后 density 和 distribution 都是一个 数， 而非对象或者 string， 通过 StatisticsCalculator的改变触发这两个值的改变。</p>
<p>:unitCalculators、:unitDescriptions、:unitInputLabels、:unitDisplayUnits</p>
<p>export const statistics_demo &#x3D; {<br>    totalValue: null,  &#x2F;&#x2F; 累计值<br>    totalCount: null,  &#x2F;&#x2F; 计数值<br>    history: [],<br>    unitCalculators:null,<br>    unitDescriptions:null,<br>    unitInputLabels:null,<br>    unitDisplayUnits:null,<br>    display() {<br>        console.log(‘display’, this);<br>        return “”;<br>    }<br>};</p>
<p>[4.13]<br>张宝民：</p>
<ul>
<li>问题1：未知ID的问题，看一下如果不涉及数据记录逻辑错误，可以往后放放，如果影响数据记录正确性，则优先解决。<ul>
<li><input disabled="" type="checkbox"> 疑似提交病虫害时重新加入了一个 p_log<br>问题2：单位对应的问题，优先级可以低一些。</li>
<li><input checked="" disabled="" type="checkbox"> 对接<br>问题3：病叶率和幼虫株率的问题，优先解决，我来解决，完了你合并一下。</li>
<li><input disabled="" type="checkbox"> </li>
</ul>
</li>
<li>问题4：第一条记录在历史记录里不可见的问题，是bug，优先解决。<ul>
<li><input checked="" disabled="" type="checkbox"> 在于单位，就是单位压根没有生效, 已经解决，因为诸多地方重复计算，值覆盖等问题，最后解决是因为忽略了 ‘update:modelValue’ 时期也会进行值更新；<br>问题5：历史记录格式修改，优先级低。</li>
<li><input disabled="" type="checkbox"> 问题6：屏幕适配的问题，看看是不是设置的问题，优先解决。</li>
<li><input checked="" disabled="" type="checkbox"> 问题7：记录中涉及的浮点数值小数点后保留2位，坐标信息除外。</li>
<li>[ ]</li>
</ul>
</li>
</ul>
<p>[4.14]</p>
<ol>
<li><p>小麦查询病虫害</p>
</li>
<li><p>单为表有问题</p>
</li>
<li><p>edit dp_log 有问题；</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 加了判断，但是没有加更新;</li>
</ul>
</li>
<li><p>提交卡顿；</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> uni-forms 的原因;</li>
</ul>
</li>
<li><p>错误校验;</p>
</li>
<li><p>更新操作；</p>
</li>
</ol>
<p>m_log 传递错误</p>
<h1 id="会议日志"><a href="#会议日志" class="headerlink" title="会议日志"></a>会议日志</h1><p>[1.23]</p>
<ol>
<li>病害虫 -&gt; 害虫；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成，分成三类</li>
</ol>
</li>
<li>根据作物 发布预警；</li>
<li>协同采集，作为一个日志，每个人的采集界面作为一个日志；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
<li>采集是以日志的形式发布的，每个人负责一个采样点，每个采样点下就是一个采集界面</li>
</ol>
</li>
<li>采集界面 危害程度 替换为 百科；<ol>
<li><input checked="" disabled="" type="checkbox"> 回溯，不做改东</li>
</ol>
</li>
<li>方法要加上，要不要重复；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>不同的人做不同的小区；一个设备一个小区；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>默认封垄为否；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
</ol>
<h2 id="中台验收"><a href="#中台验收" class="headerlink" title="中台验收"></a>中台验收</h2><p>[3.14]<br>页面意见：</p>
<ol>
<li>生育期需要加入；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>品种支持输入；</li>
<li>区域限制改成区域个数；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>元数据更新的审核；</li>
<li>百株虫率, 有虫株数， 添加；<ol>
<li><input checked="" disabled="" type="checkbox"> 完成</li>
</ol>
</li>
<li>app or 小程序； - 需要调研本地存储；</li>
<li>非盐碱地 or 盐碱地； - 地区可以手动输入，并添加一个备注；</li>
<li>语音识别输入；</li>
</ol>
<p>两个问题：</p>
<ol>
<li>病情指数的计算；<ol>
<li>病株率 X 危害程度[1-5] &#x3D; 病情指数；</li>
<li>病叶率； - 作为什么角色</li>
</ol>
</li>
<li>单位应该统一一下；</li>
</ol>

    </article>
    <!-- license -->
    
        <div class="license-wrapper">
            <p>Author：<a href="http://itheds.github.io">iTheds</a>
            <p>Link：<a href="http://itheds.github.io/work/IPPCAAS/%E5%86%9C%E4%B8%9A%E9%A1%B9%E7%9B%AE.html">http://itheds.github.io/work/IPPCAAS/%E5%86%9C%E4%B8%9A%E9%A1%B9%E7%9B%AE.html</a>
            <p>Publish date：<a href="http://itheds.github.io/work/IPPCAAS/%E5%86%9C%E4%B8%9A%E9%A1%B9%E7%9B%AE.html">January 7th 2025, 12:00:00 am</a>
            <p>Update date：<a href="http://itheds.github.io/work/IPPCAAS/%E5%86%9C%E4%B8%9A%E9%A1%B9%E7%9B%AE.html">April 17th 2025, 9:08:07 am</a>
            <p>License：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
            
        </li>
        <li class="previous">
            
        </li>
    </ul>
    <!-- comment -->
    
        <div class="post-comment">
            <!-- 来必力 City 版安装代码 -->


            

            

            

            <!-- utteranc评论 -->


            <!-- partial('_partial/comment/changyan') -->
            <!--PC版-->


            
            

            

        </div>
    
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    
    <!-- Mathjax -->
    
</main>

                <!-- profile -->
                
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
    
        <div class="social">
            
    
        
            
                <a href="mailto:itheds@163.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/iTheds" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                    
                    <img class="profile-qr" src="/assets/example_qr.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    


        </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    
    <!-- 不蒜子  -->
    
        <div class="busuanzi-container">
            
             
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
            
        </div>
    	
</footer>

        </div>
        <!-- toc -->
        
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 0
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
        
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "http://itheds.github.io",
        root: siteMetaRoot,
        author: "iTheds"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->


        <!-- main func -->
        <script src="/scripts/main.js?v=20211217"></script>
        <!-- dark mode -->
        <script src="/scripts/dark.js?v=20211217"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>
        <!-- algolia -->
        
        <!-- busuanzi -->
        
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        
        <!-- CNZZ -->
        
        <!-- async load share.js -->
        
        <!-- mermaid -->
        
    </body>
</html>
